<template id="pending-reviews-page">  <div class="vue-component">    <div class="container">      <h2 class="my-4">Pending Reviews</h2>      <h5>Manager: {{ currentUser.first_name }} {{ currentUser.last_name }}</h5>      <!-- Select Emplyee to view Pending Reviews -->      <div class="form-group" style="width:500px;">        <label class="h5">Employee</label>        <select class="form-control" v-model="selectedEmployee">          <option>Select</option>          <option v-for="employee in managedEmployees" :value="employee.id">            {{ employee.first_name }} {{ employee.last_name }}          </option>        </select>      </div>    </div>    <div class="card my-4">      <div class="container">        <h3>Employees Reviewed</h3>        <ul>          <li v-for="review in reviewedEmployees">            {{ review.reviewee.first_name + " " + review.reviewee.last_name }}          </li>        </ul>      </div>    </div>    <div class="card my-4">      <div class="container">        <h3>Employees to be Reviewed</h3>        <ul>          <li v-for="employee in unreviewedEmployees" :key="employee.id">            {{ employee.first_name + " " + employee.last_name }}          </li>        </ul>      </div>    </div>    <div class="card my-4">      <div class="container">        <h3>Send Review Request</h3>        <table class="table table-striped">          <thead>            <tr>              <th scope="col">#</th>              <th v-for="employee in employees">                {{ employee.first_name }} {{ employee.last_name }}              </th>            </tr>          </thead>          <tbody>            <tr v-for="employeePrime in employees">              <th scope="row">                {{ employeePrime.first_name }} {{ employeePrime.last_name }}              </th>              <td v-for="employee in employees">                <div class="form-check">                  <input                    class="form-check-input"                    type="checkbox"                    v-bind:value="[employeePrime.id, employee.id]"                    v-model="checkedEmployees"                  />                </div>              </td>            </tr>          </tbody>        </table>      </div>    </div>    <button class="btn btn-primary" v-on:click="submit()">      Send Request    </button>  </div></template><script>import axios from "axios";// import $ from "jquery";export default {  data: function() {    return {      currentUser: {},      reviews: [],      employees: [],      review: {        reviewer_id: "",        reviewee_id: "",        relationship: "",        judgement: "",        leadership: "",        technical: "",        positive_feedback: "",        needs_improvement: ""      },      selectedEmployee: "",      reviewedEmployeeIds: [],      unreviewedEmployees: [],      checkedEmployees: []    };  },  created: function() {    const token = localStorage.getItem("jwt");    axios.defaults.headers.common["Authorization"] = "Bearer " + token;    //Populate information on reviews that need to be completed.    axios.get("/pending_reviews").then(      function(response) {        this.reviews = response.data;      }.bind(this)    );    //Populating all employees    /* Do we want to pull all employees or just the employees of the logged in manager? */    axios.get("/employees").then(      function(response) {        this.employees = response.data;        // console.log(this.employees);      }.bind(this)    );    // Pulling Current User information    axios.get("/current_employee").then(res => {      this.currentUser = res.data;      // console.log(res.data);    });  },  methods: {    submit() {      /*      This will email the checked employees their peers they're asked to review. We currently have this set to output a console.log with a breakdown of who is being asked to review whom. We need to add email functionality where each employee will receive an email per peer they are being asked to review      */      this.checkedEmployees.forEach(employee => {        console.log(          this.employees[employee[0] - 1].first_name +            " " +            this.employees[employee[0] - 1].last_name +            " will review " +            this.employees[employee[1] - 1].first_name +            " " +            this.employees[employee[1] - 1].last_name        );      });    }  },  computed: {    managedEmployees() {      if (!this.currentUser.id) {        return [];      }      return this.employees.filter(        employee => this.currentUser.id === employee.manager_id      );    },    reviewedEmployees() {      if (!this.selectedEmployee) {        return [];      }      this.reviewedEmployeeIds = this.reviews        .filter(review => this.selectedEmployee === review.reviewer_id)        .map(review => review.reviewee.id);      this.unreviewedEmployees = this.employees.filter(        employee => !this.reviewedEmployeeIds.includes(employee.id)      );      return this.reviews.filter(        review => this.selectedEmployee === review.reviewer_id      );    }  }};</script>